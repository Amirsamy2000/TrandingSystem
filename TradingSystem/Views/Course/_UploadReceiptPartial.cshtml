


@model int


@if (ViewBag.IsFree)
{

    <!-- Free course message -->
    <div class="alert alert-success d-flex " role="alert" style="border-radius: 10px;"><!--align-items-center-->
        <i class="fas fa-gift me-2" style="font-size: 1.7rem;"></i>
        <div>
            <strong>Good news!</strong> 🎉 This course is completely <b>FREE</b>.
            Please upload a screenshot of your profile or your registration on our trading system to get the course for free.
        </div>
    </div>

    @* <a class="btn btn-primary w-100 " > view Details </a> *@

    <form asp-controller="Course" asp-action="EnrollCourse" method="post" enctype="multipart/form-data">

        <input type="hidden" name="courseId" id="courseId" value="@Model" />

        <div class="mb-3">
            <label for="RecieptImage" class="form-label">Upload Receipt</label>
            <input type="file" class="form-control" name="RecieptImage" id="RecieptImage" accept="image/*" required />
        </div>

        <button type="submit" class="btn btn-primary">Enroll</button>
    </form>

@* 
    <form action="/Course/EnrollCourse" method="post" enctype="multipart/form-data">
        <input type="hidden" name="courseId" value="@Model" />
        <input hidden type="file" name="RecieptImage" />
        <!-- View Details Button -->
        <button type="submit" class="btn flex-fill fw-semibold py-2"
                onclick="location.href='/Course/EnrollCourse?courseId=@Model'"
                style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                                                               border: none; border-radius: 12px; color: white;
                                                               transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
                                                               box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
                                                               position: relative; overflow: hidden;">
            <span class="position-relative z-1">

                <span>Enroll Now</span>
                <i class="fas fa-arrow-right @(true ? "me-2" : "ms-2")"></i>

            </span>
            <!-- Button shine effect -->
            <div class="position-absolute top-0 start-0 w-100 h-100"
                 style="background: linear-gradient(45deg, transparent 30%, rgba(255,255,255,0.2) 50%, transparent 70%);
                                                                transform: translateX(-100%); transition: transform 0.6s;"></div>
        </button>
    </form>


     *@

}
else
{
    <div class="alert alert-info" role="alert">
        <h5 class="mb-2">💳 Payment Instructions</h5>
        <p class="mb-2">
            Please pay the course fee via <strong>Vodafone Cash</strong> to the number provided below.
            Once the payment is made, kindly upload a clear image of the receipt in the field below to complete your enrollment.
        </p>
        <hr class="my-2">
        <p class="mb-1">
            📱 <strong>WhatsApp for Confirmation:</strong>
            <a href="https://wa.me/201288252383" target="_blank" class="fw-bold text-decoration-none">
                +20 128 825 2383
            </a>
        </p>
        <p class="mb-0">
            💰 <strong>Vodafone Cash Number:</strong>
            <span class="fw-bold text-danger">01012345678</span>
        </p>
    </div>




    <form asp-controller="Course" asp-action="EnrollCourse" method="post" enctype="multipart/form-data">

        <input type="hidden" name="courseId" id="courseId" value="@Model" />

        <div class="mb-3">
            <label for="RecieptImage" class="form-label">Upload Receipt</label>
            <input type="file" class="form-control" name="RecieptImage" id="RecieptImage" accept="image/*" required />
        </div>

        <button type="submit" class="btn btn-primary">Enroll</button>
    </form>
}



@* <script> *@
@*     document.addEventListener('DOMContentLoaded', function () { *@
@*         debugger *@
@*             const form = document.getElementById('enrollForm'); *@
@*             if (!form) return; // prevents the error if the form is not present *@

@*             form.addEventListener('submit', function (e) { *@
@*                 e.preventDefault(); *@

@*                 const formData = new FormData(form); *@
@*                 // const courseId = form.getAttribute("data-course-id"); *@

@*                 // formData.append("courseId", courseId); *@

@*                 fetch('/Course/EnrollCourse', { *@
@*                     method: 'POST', *@
@*                     body: formData *@
@*                 }) *@
@*                 .then(res => { *@
@*                     if (res.ok) return res.json(); *@
@*                     throw new Error("Failed to enroll."); *@
@*                 }) *@
@*                 .then(data => { *@
@*                     alert("Enrollment submitted successfully!"); *@
@*                     const modal = bootstrap.Modal.getInstance(document.getElementById('enrollModal')); *@
@*                     modal.hide(); *@
@*                 }) *@
@*                 .catch(error => { *@
@*                     alert("Error: " + error.message); *@
@*                 }); *@
@*             }); *@
@*         }); *@

@* </script> *@
